---
- name: Using the IBM Spectrum Virtualize collection
  hosts: localhost
  tasks:
    - name: Gather info from storage
      ibm.spectrum_virtualize.ibm_svc_info:
        clustername: 192.168.56.60
        domain:
        username: superuser
        password: P@ssw0rd
        log_path: {{ rcresults }}
        gather_subset: rcrelationship
      register: "rcresults"  

 #   - debug:
 #       msg: "{{ rcresults }}"

#    - name: grep from rcresults
      #shell: grep master_vdisk_name "{{ rcresults }}" >> ./temp.log
#      shell: v=( $(grep -n "master_vdisk_name" "{{ rcresults }}" | cut -f1 -d:) ); for e in ${v[@]}; do sed '1,'$e'!d' "{{ rcresults }}" | grep "freeze_time" | tail -1; sed ''$e','$e'!d' "{{ rcresults }}" | grep "master_vdisk_name"; done >> ./res.log

